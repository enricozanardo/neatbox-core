{"version":3,"sources":["illustration.svg","logo.svg","app.tsx","index.tsx","app.module.scss"],"names":["validateAddress","address","length","error","defaultFaucetConfig","amount","applicationUrl","tokenPrefix","getConfig","a","fetch","apiResponse","json","result","WarningIcon","className","styles","icon","warning","SuccessDialog","props","dialogRoot","open","dialogOpen","dialogClose","dialogBackground","dialogModal","dialogHeader","dialogHeaderContent","iconButton","onClick","onClose","dialogBody","children","App","React","input","updateInput","errorMsg","updateErrorMsg","showSuccessDialog","updateShowSuccessDialog","token","updateToken","recaptchaReady","updateRecaptchaReady","config","setConfig","fetchedConfig","initConfig","catch","console","undefined","captchaSitekey","script","document","createElement","src","async","defer","body","appendChild","id","setInterval","window","grecaptcha","render","clearInterval","sitekey","callback","newToken","removeChild","onSubmit","apiClient","createWSClient","client","invoke","message","root","header","logoURL","logo","alt","content","main","toLocaleUpperCase","inputArea","placeholder","value","onChange","e","val","target","disabled","capcha","addressLabel","addressValue","faucetAddress","background","illustration","copyright","ReactDOM","getElementById","module","exports"],"mappings":"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","file":"static/js/main.186ad662.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/illustration.58d4feef.svg\";","export default __webpack_public_path__ + \"static/media/logo.8424fab8.svg\";","/* eslint-disable arrow-body-style */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { apiClient } from '@liskhq/lisk-client';\nimport * as React from 'react';\n\nimport styles from './app.module.scss';\nimport illustration from './illustration.svg';\nimport logo from './logo.svg';\n\nconst validateAddress = (address: string): boolean => {\n\ttry {\n\t\treturn address.length === 40;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n\ninterface FaucetConfig {\n\tamount: string;\n\tapplicationUrl: string;\n\ttokenPrefix: string;\n\tlogoURL?: string;\n\tcaptchaSitekey?: string;\n\tfaucetAddress?: string;\n}\n\nconst defaultFaucetConfig: FaucetConfig = {\n\tamount: '10000000000',\n\tapplicationUrl: 'ws://localhost:8080/ws',\n\ttokenPrefix: 'lsk',\n};\n\nexport const getConfig = async () => {\n\tif (process.env.NODE_ENV === 'development') {\n\t\treturn defaultFaucetConfig;\n\t}\n\n\tconst apiResponse = await fetch('/api/config');\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\tconst result: FaucetConfig = await apiResponse.json();\n\n\treturn result;\n};\n\ndeclare global {\n\tinterface Window {\n\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\tgrecaptcha: any;\n\t}\n}\n\nconst WarningIcon = () => <span className={`${styles.icon} ${styles.warning}`}>&#xE8B2;</span>;\n\ninterface DialogProps {\n\topen?: boolean;\n\tonClose?: () => void;\n}\n\nconst SuccessDialog: React.FC<DialogProps> = props => {\n\treturn (\n\t\t<div className={`${styles.dialogRoot} ${props.open ? styles.dialogOpen : styles.dialogClose}`}>\n\t\t\t<div className={styles.dialogBackground}>\n\t\t\t\t<div className={styles.dialogModal}>\n\t\t\t\t\t<div className={styles.dialogHeader}>\n\t\t\t\t\t\t<div className={styles.dialogHeaderContent}>Success</div>\n\t\t\t\t\t\t<div className={styles.iconButton} onClick={props.onClose}>\n\t\t\t\t\t\t\t<span className={styles.icon}>close</span>;\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.dialogBody}>{props.children}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport const App: React.FC = () => {\n\tconst [input, updateInput] = React.useState('');\n\tconst [errorMsg, updateErrorMsg] = React.useState('');\n\tconst [showSuccessDialog, updateShowSuccessDialog] = React.useState(false);\n\tconst [token, updateToken] = React.useState<string | undefined>();\n\tconst [recaptchaReady, updateRecaptchaReady] = React.useState(false);\n\tconst [config, setConfig] = React.useState<FaucetConfig>(defaultFaucetConfig);\n\tReact.useEffect(() => {\n\t\tconst initConfig = async () => {\n\t\t\tconst fetchedConfig = await getConfig();\n\t\t\tsetConfig({ ...fetchedConfig });\n\t\t};\n\t\tinitConfig().catch(console.error);\n\t}, []);\n\tReact.useEffect(() => {\n\t\tif (config.captchaSitekey === undefined) {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\treturn () => {};\n\t\t}\n\t\tconst script = document.createElement('script');\n\t\tscript.src = 'https://www.google.com/recaptcha/api.js';\n\t\tscript.async = true;\n\t\tscript.defer = true;\n\t\tdocument.body.appendChild(script);\n\t\tconst id = setInterval(() => {\n\t\t\tif (\n\t\t\t\ttypeof window.grecaptcha !== 'undefined' &&\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\t\ttypeof window.grecaptcha.render === 'function'\n\t\t\t) {\n\t\t\t\tclearInterval(id);\n\t\t\t\tif (recaptchaReady) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\twindow.grecaptcha.render('recapcha', {\n\t\t\t\t\tsitekey: config.captchaSitekey,\n\t\t\t\t\tcallback: (newToken: string) => updateToken(newToken),\n\t\t\t\t});\n\t\t\t\tupdateRecaptchaReady(true);\n\t\t\t}\n\t\t}, 1000);\n\t\treturn () => {\n\t\t\tdocument.body.removeChild(script);\n\t\t};\n\t}, [config]);\n\n\tconst onChange = (val: string) => {\n\t\tupdateInput(val);\n\t\tif (val === '') {\n\t\t\tupdateErrorMsg('');\n\t\t}\n\t};\n\n\tconst onSubmit = async () => {\n\t\tif (token === undefined) {\n\t\t\tupdateErrorMsg('Recaptcha must be checked.');\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tconst client = await apiClient.createWSClient(config.applicationUrl);\n\t\t\tawait client.invoke('faucet:fundTokens', {\n\t\t\t\taddress: input,\n\t\t\t\ttoken,\n\t\t\t});\n\t\t\tupdateErrorMsg('');\n\t\t\tupdateShowSuccessDialog(true);\n\t\t} catch (error) {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\tupdateErrorMsg(error?.message ?? 'Fail to connect to server');\n\t\t}\n\t};\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<header className={styles.header}>\n\t\t\t\t<img src={config.logoURL ?? logo} className={styles.logo} alt=\"logo\" />\n\t\t\t</header>\n\t\t\t<section className={styles.content}>\n\t\t\t\t<SuccessDialog\n\t\t\t\t\topen={showSuccessDialog}\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tupdateInput('');\n\t\t\t\t\t\tupdateShowSuccessDialog(false);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSuccessfully submitted to transfer funds to:\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{input}.\n\t\t\t\t\t</p>\n\t\t\t\t</SuccessDialog>\n\t\t\t\t<div className={styles.main}>\n\t\t\t\t\t<h1>All tokens are for testing purposes only</h1>\n\t\t\t\t\t<h2>\n\t\t\t\t\t\tPlease enter your address to receive {config.amount}{' '}\n\t\t\t\t\t\t{config.tokenPrefix.toLocaleUpperCase()} tokens for free\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div className={styles.inputArea}>\n\t\t\t\t\t\t<div className={styles.input}>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName={`${errorMsg !== '' ? styles.error : ''}`}\n\t\t\t\t\t\t\t\tplaceholder={'6d273e3e927f2152b1f75d42aa7f59cdabaf4e07'}\n\t\t\t\t\t\t\t\tvalue={input}\n\t\t\t\t\t\t\t\tonChange={e => onChange(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errorMsg ? <WarningIcon /> : <span />}\n\t\t\t\t\t\t\t{errorMsg ? <span className={styles.errorMsg}>{errorMsg}</span> : <span />}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button disabled={!validateAddress(input) || !recaptchaReady} onClick={onSubmit}>\n\t\t\t\t\t\t\tReceive\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"recapcha\" className={styles.capcha}></div>\n\t\t\t\t\t<div className={styles.address}>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span className={styles.addressLabel}>Faucet address:</span>\n\t\t\t\t\t\t\t<span className={styles.addressValue}>{config.faucetAddress}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.background}>\n\t\t\t\t\t<img src={illustration} className={styles.illustration} alt=\"illustration\" />\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<footer>\n\t\t\t\t<p className={styles.copyright}>© 2021 Lisk Foundation</p>\n\t\t\t</footer>\n\t\t</div>\n\t);\n};\n","/* eslint-disable import/extensions */\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport './index.scss';\nimport { App } from './app';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"app_root__24lUU\",\"content\":\"app_content__2kvsd\",\"inputArea\":\"app_inputArea__1M9jU\",\"input\":\"app_input__wjfc2\",\"error\":\"app_error__1hOce\",\"errorMsg\":\"app_errorMsg__kqkRM\",\"capcha\":\"app_capcha__2AQdW\",\"addressLabel\":\"app_addressLabel__28pvE\",\"addressValue\":\"app_addressValue__3Y8Gp\",\"illustration\":\"app_illustration__1OMfR\",\"copyright\":\"app_copyright__3y3kr\",\"icon\":\"app_icon__sWt58\",\"warning\":\"app_warning__1v5HE\",\"dialogRoot\":\"app_dialogRoot__uskQ7\",\"dialogBackground\":\"app_dialogBackground__3uRUV\",\"dialogModal\":\"app_dialogModal__MYedy\",\"dialogOpen\":\"app_dialogOpen__3sLEx\",\"blowUpModal\":\"app_blowUpModal__3Mn0N\",\"dialogClose\":\"app_dialogClose__3x81D\",\"blowUpModalTwo\":\"app_blowUpModalTwo__3Dg57\",\"dialogHeader\":\"app_dialogHeader__3ZeEo\",\"dialogHeaderContent\":\"app_dialogHeaderContent__2R-5u\",\"dialogBody\":\"app_dialogBody__1z7pj\",\"dialogAdddress\":\"app_dialogAdddress__2rSn0\",\"iconButton\":\"app_iconButton__4gTHB\"};"],"sourceRoot":""}